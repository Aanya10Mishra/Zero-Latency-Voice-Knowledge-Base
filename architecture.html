<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero-Latency Voice KB - Data Flow Diagram</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1200px;
            width: 100%;
        }
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .diagram-container {
            overflow-x: auto;
            margin: 20px 0;
        }
        svg {
            max-width: 100%;
            height: auto;
        }
        .node {
            transition: all 0.3s ease;
        }
        .node:hover {
            filter: brightness(1.1);
            transform: scale(1.05);
        }
        .arrow {
            animation: flow 2s ease-in-out infinite;
        }
        @keyframes flow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        .latency-chart {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        .latency-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 14px;
        }
        .latency-label {
            width: 180px;
            font-weight: 500;
        }
        .latency-visual {
            flex: 1;
            background: #e9ecef;
            border-radius: 4px;
            height: 24px;
            position: relative;
            overflow: hidden;
        }
        .latency-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéôÔ∏è Zero-Latency Voice Knowledge Base</h1>
        <div class="subtitle">Complete Data Flow Architecture</div>
        
        <div class="diagram-container">
            <svg viewBox="0 0 800 1000" xmlns="http://www.w3.org/2000/svg">
                <!-- User Layer -->
                <rect x="250" y="20" width="300" height="60" rx="8" fill="#667eea" class="node"/>
                <text x="400" y="45" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üë§ USER</text>
                <text x="400" y="65" text-anchor="middle" fill="white" font-size="12">Asks Question</text>
                
                <!-- Arrow to Voice Input -->
                <path d="M 400 80 L 400 110" stroke="#667eea" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Voice Input (ASR) -->
                <rect x="250" y="110" width="300" height="70" rx="8" fill="#28a745" class="node"/>
                <text x="400" y="135" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üé§ VOICE INPUT (ASR)</text>
                <text x="400" y="155" text-anchor="middle" fill="white" font-size="12">Google Speech Recognition</text>
                <text x="400" y="170" text-anchor="middle" fill="white" font-size="11" opacity="0.8">~500ms</text>
                
                <!-- Arrow to Query Rewriter -->
                <path d="M 400 180 L 400 210" stroke="#28a745" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Query Rewriter -->
                <rect x="250" y="210" width="300" height="70" rx="8" fill="#fd7e14" class="node"/>
                <text x="400" y="235" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üîÑ QUERY REWRITER</text>
                <text x="400" y="255" text-anchor="middle" fill="white" font-size="12">Groq Llama 3.1</text>
                <text x="400" y="270" text-anchor="middle" fill="white" font-size="11" opacity="0.8">~200ms</text>
                
                <!-- Arrow to Hybrid Search -->
                <path d="M 400 280 L 400 310" stroke="#fd7e14" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Hybrid Search Container -->
                <rect x="50" y="310" width="700" height="100" rx="8" fill="#6c757d" opacity="0.1"/>
                <text x="400" y="330" text-anchor="middle" fill="#6c757d" font-size="14" font-weight="bold">HYBRID SEARCH (Parallel)</text>
                
                <!-- Vector Search -->
                <rect x="100" y="340" width="250" height="60" rx="8" fill="#17a2b8" class="node"/>
                <text x="225" y="360" text-anchor="middle" fill="white" font-size="14" font-weight="bold">üìä Vector Search</text>
                <text x="225" y="378" text-anchor="middle" fill="white" font-size="11">ChromaDB + Embeddings</text>
                <text x="225" y="393" text-anchor="middle" fill="white" font-size="10" opacity="0.8">Top 10 results (~50ms)</text>
                
                <!-- BM25 Search -->
                <rect x="450" y="340" width="250" height="60" rx="8" fill="#17a2b8" class="node"/>
                <text x="575" y="360" text-anchor="middle" fill="white" font-size="14" font-weight="bold">üîç BM25 Search</text>
                <text x="575" y="378" text-anchor="middle" fill="white" font-size="11">Keyword Matching</text>
                <text x="575" y="393" text-anchor="middle" fill="white" font-size="10" opacity="0.8">Top 10 results (~50ms)</text>
                
                <!-- Arrows from both searches to Reranker -->
                <path d="M 225 400 L 225 440 L 400 440 L 400 460" stroke="#17a2b8" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                <path d="M 575 400 L 575 440 L 400 440 L 400 460" stroke="#17a2b8" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Cross-Encoder Reranker -->
                <rect x="250" y="460" width="300" height="70" rx="8" fill="#dc3545" class="node"/>
                <text x="400" y="485" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üéØ CROSS-ENCODER</text>
                <text x="400" y="505" text-anchor="middle" fill="white" font-size="12">Neural Reranking</text>
                <text x="400" y="520" text-anchor="middle" fill="white" font-size="11" opacity="0.8">Top 5 results (~150ms)</text>
                
                <!-- Arrow to LLM Generator -->
                <path d="M 400 530 L 400 560" stroke="#dc3545" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- LLM Generator -->
                <rect x="250" y="560" width="300" height="80" rx="8" fill="#6f42c1" class="node"/>
                <text x="400" y="585" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üß† LLM GENERATOR</text>
                <text x="400" y="605" text-anchor="middle" fill="white" font-size="12">Groq Llama 3.1</text>
                <text x="400" y="620" text-anchor="middle" fill="white" font-size="11">Context + History ‚Üí Answer</text>
                <text x="400" y="633" text-anchor="middle" fill="white" font-size="11" opacity="0.8">~300ms</text>
                
                <!-- Arrow to Voice Optimizer -->
                <path d="M 400 640 L 400 670" stroke="#6f42c1" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Voice Optimizer -->
                <rect x="250" y="670" width="300" height="60" rx="8" fill="#ffc107" class="node"/>
                <text x="400" y="693" text-anchor="middle" fill="white" font-size="16" font-weight="bold">‚ú® VOICE OPTIMIZER</text>
                <text x="400" y="713" text-anchor="middle" fill="white" font-size="12">Text Processing for TTS</text>
                
                <!-- Arrow to TTS -->
                <path d="M 400 730 L 400 760" stroke="#ffc107" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Text-to-Speech -->
                <rect x="250" y="760" width="300" height="70" rx="8" fill="#e83e8c" class="node"/>
                <text x="400" y="785" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üîä TEXT-TO-SPEECH</text>
                <text x="400" y="805" text-anchor="middle" fill="white" font-size="12">pyttsx3</text>
                <text x="400" y="820" text-anchor="middle" fill="white" font-size="11" opacity="0.8">~100ms</text>
                
                <!-- Arrow to User -->
                <path d="M 400 830 L 400 860" stroke="#e83e8c" stroke-width="3" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                
                <!-- Output to User -->
                <rect x="250" y="860" width="300" height="60" rx="8" fill="#20c997" class="node"/>
                <text x="400" y="885" text-anchor="middle" fill="white" font-size="16" font-weight="bold">üëÇ USER HEARS</text>
                <text x="400" y="905" text-anchor="middle" fill="white" font-size="12">Voice Response</text>
                
                <!-- Conversation Loop -->
                <path d="M 550 890 L 650 890 L 650 50 L 550 50" stroke="#667eea" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowhead-small)"/>
                <text x="670" y="470" fill="#667eea" font-size="12" font-weight="bold" transform="rotate(90 670 470)">Conversation Loop</text>
                
                <!-- Arrow marker definitions -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#667eea"/>
                    </marker>
                    <marker id="arrowhead-small" markerWidth="8" markerHeight="8" refX="7" refY="2" orient="auto">
                        <polygon points="0 0, 8 2, 0 4" fill="#667eea"/>
                    </marker>
                </defs>
            </svg>
        </div>
        
        <!-- Latency Breakdown -->
        <div class="latency-chart">
            <h3 style="color: #667eea; margin-top: 0;">‚è±Ô∏è Latency Breakdown (~1300ms Total)</h3>
            
            <div class="latency-bar">
                <div class="latency-label">üé§ Speech Recognition:</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 38%;">500ms</div>
                </div>
            </div>
            
            <div class="latency-bar">
                <div class="latency-label">üîÑ Query Rewriting:</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 15%;">200ms</div>
                </div>
            </div>
            
            <div class="latency-bar">
                <div class="latency-label">üîç Hybrid Search:</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 4%;">50ms</div>
                </div>
            </div>
            
            <div class="latency-bar">
                <div class="latency-label">üéØ Reranking:</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 12%;">150ms</div>
                </div>
            </div>
            
            <div class="latency-bar">
                <div class="latency-label">üß† LLM Generation:</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 23%;">300ms</div>
                </div>
            </div>
            
            <div class="latency-bar">
                <div class="latency-label">üîä Text-to-Speech:</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 8%;">100ms</div>
                </div>
            </div>
            
            <div class="latency-bar" style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #dee2e6;">
                <div class="latency-label" style="color: #28a745; font-weight: bold;">üéØ TTFB (with filler):</div>
                <div class="latency-visual">
                    <div class="latency-fill" style="width: 4%; background: linear-gradient(90deg, #28a745, #20c997);">~50ms</div>
                </div>
            </div>
        </div>
        
        <!-- Key Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">~800ms</div>
                <div class="stat-label">Time to First Byte</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">5</div>
                <div class="stat-label">Top Relevant Chunks</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">2x</div>
                <div class="stat-label">Search Methods Combined</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">6</div>
                <div class="stat-label">Pipeline Stages</div>
            </div>
        </div>
    </div>
</body>
</html>